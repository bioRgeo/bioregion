<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>5.2 Compare partitions • bioregion</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="5.2 Compare partitions">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">bioregion</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/bioregion.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/a1_install_binary_files.html">1. Installation of the binary files</a></li>
    <li><a class="dropdown-item" href="../articles/a2_matrix_and_network_formats.html">2. Matrix and network formats</a></li>
    <li><a class="dropdown-item" href="../articles/a3_pairwise_metrics.html">3. Pairwise similarity/dissimilarity metrics</a></li>
    <li><a class="dropdown-item" href="../articles/a4_1_hierarchical_clustering.html">4.1 Hierarchical clustering</a></li>
    <li><a class="dropdown-item" href="../articles/a4_2_non_hierarchical_clustering.html">4.2 Non-hierarchical clustering</a></li>
    <li><a class="dropdown-item" href="../articles/a4_3_network_clustering.html">4.3 Network clustering</a></li>
    <li><a class="dropdown-item" href="../articles/a4_4_microbenchmark.html">4.4 Microbenchmark</a></li>
    <li><a class="dropdown-item" href="../articles/a5_1_visualization.html">5.1 Visualization</a></li>
    <li><a class="dropdown-item" href="../articles/a5_2_compare_partitions.html">5.2 Compare partitions</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news">
<li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://github.com/bioRgeo/bioregion/releases/tag/v1.1.1">Version 1.1.1</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/bioRgeo/bioregion/releases/tag/v1.1.0">Version 1.1.0</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/bioRgeo/bioregion/releases/tag/v1.0.0">Version 1.0.0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/bioRgeo/bioregion/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>5.2 Compare partitions</h1>
                        <h4 data-toc-skip class="author">Pierre Denelle,
Boris Leroy and Maxime Lenormand</h4>
            
            <h4 data-toc-skip class="date">2024-07-12</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/bioRgeo/bioregion/blob/master/vignettes/a5_2_compare_partitions.Rmd" class="external-link"><code>vignettes/a5_2_compare_partitions.Rmd</code></a></small>
      <div class="d-none name"><code>a5_2_compare_partitions.Rmd</code></div>
    </div>

    
    
<p>In this vignette, we aim at comparing the assignment of sites into
different bioregions across multiple bioregionalizations, using the
function <code><a href="../reference/compare_partitions.html">compare_partitions()</a></code>.</p>
<div class="section level2">
<h2 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h2>
<p>We use the vegetation dataset that comes with
<code>bioregion</code>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"vegedf"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"vegemat"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Calculation of (dis)similarity matrices</span></span>
<span><span class="va">vegedissim</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dissimilarity.html">dissimilarity</a></span><span class="op">(</span><span class="va">vegemat</span>, metric <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Simpson"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">vegesim</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dissimilarity_to_similarity.html">dissimilarity_to_similarity</a></span><span class="op">(</span><span class="va">vegedissim</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="bioregionalization">Bioregionalization<a class="anchor" aria-label="anchor" href="#bioregionalization"></a>
</h2>
<p>We use the same three bioregionalization algorithms as in the <a href="https://biorgeo.github.io/bioregion/articles/a5_visualization.html" class="external-link">visualization
vignette</a>, i.e. a non-hierarchical, hierarchical and network
bioregionalizations.<br>
We chose 3 bioregions for the non-hierarchical and hierarchical
bioregionalizations. <br></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Non hierarchical bioregionalization</span></span>
<span><span class="va">vege_nhclu_kmeans</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/nhclu_kmeans.html">nhclu_kmeans</a></span><span class="op">(</span><span class="va">vegedissim</span>, n_clust <span class="op">=</span> <span class="fl">3</span>, index <span class="op">=</span> <span class="st">"Simpson"</span><span class="op">)</span></span>
<span><span class="va">vege_nhclu_kmeans</span><span class="op">$</span><span class="va">cluster_info</span> <span class="co"># 3</span></span></code></pre></div>
<pre><code><span><span class="co">##     partition_name n_clust</span></span>
<span><span class="co">## K_3            K_3       3</span></span></code></pre>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Hierarchical bioregionalization</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">vege_hclu_hierarclust</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/hclu_hierarclust.html">hclu_hierarclust</a></span><span class="op">(</span>dissimilarity <span class="op">=</span> <span class="va">vegedissim</span>,</span>
<span>                                          index <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">vegedissim</span><span class="op">)</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span>,</span>
<span>                                          method <span class="op">=</span> <span class="st">"mcquitty"</span>, n_clust <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">vege_hclu_hierarclust</span><span class="op">$</span><span class="va">cluster_info</span> <span class="co"># 3</span></span></code></pre></div>
<pre><code><span><span class="co">##   partition_name n_clust requested_n_clust output_cut_height</span></span>
<span><span class="co">## 1            K_3       3                 3             0.625</span></span></code></pre>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Network bioregionalization</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">vege_netclu_walktrap</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/netclu_walktrap.html">netclu_walktrap</a></span><span class="op">(</span><span class="va">vegesim</span>,</span>
<span>                                        index <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">vegesim</span><span class="op">)</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">vege_netclu_walktrap</span><span class="op">$</span><span class="va">cluster_info</span> <span class="co"># 3</span></span></code></pre></div>
<pre><code><span><span class="co">##     partition_name n_clust</span></span>
<span><span class="co">## K_3            K_3       3</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="compare-the-partitions">Compare the partitions<a class="anchor" aria-label="anchor" href="#compare-the-partitions"></a>
</h2>
<p>Before comparing the partitions, we build a common
<code>data.frame</code> containing the three distinct
bioregionalizations. <br></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">comp</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">vege_hclu_hierarclust</span><span class="op">$</span><span class="va">clusters</span>,</span>
<span>                         <span class="va">vege_netclu_walktrap</span><span class="op">$</span><span class="va">clusters</span>,</span>
<span>                         by <span class="op">=</span> <span class="st">"ID"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">comp</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ID"</span>, <span class="st">"K_3_hclu"</span>, <span class="st">"K_3_netclu"</span><span class="op">)</span></span>
<span><span class="va">comp</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">comp</span>,</span>
<span>                         <span class="va">vege_nhclu_kmeans</span><span class="op">$</span><span class="va">clusters</span>,</span>
<span>                         by <span class="op">=</span> <span class="st">"ID"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">comp</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ID"</span>, <span class="st">"K_3_hclu"</span>, <span class="st">"K_3_netclu"</span>, <span class="st">"K_3_nhclu"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">comp</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    ID K_3_hclu K_3_netclu K_3_nhclu</span></span>
<span><span class="co">## 1 505        1          1         2</span></span>
<span><span class="co">## 2 988        2          3         1</span></span>
<span><span class="co">## 3 920        2          3         1</span></span>
<span><span class="co">## 4 904        2          3         1</span></span>
<span><span class="co">## 5 962        2          3         1</span></span>
<span><span class="co">## 6 762        2          3         1</span></span></code></pre>
<p>We can now run the function <code><a href="../reference/compare_partitions.html">compare_partitions()</a></code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hclu_vs_netclu</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/compare_partitions.html">compare_partitions</a></span><span class="op">(</span></span>
<span>  cluster_object <span class="op">=</span> <span class="va">comp</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"K_3_hclu"</span>, <span class="st">"K_3_netclu"</span>, <span class="st">"K_3_nhclu"</span><span class="op">)</span><span class="op">]</span>,</span>
<span>  store_pairwise_membership <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  cor_frequency <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  store_confusion_matrix <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">hclu_vs_netclu</span></span></code></pre></div>
<pre><code><span><span class="co">## Partition comparison:</span></span>
<span><span class="co">##  - 3 partitions compared</span></span>
<span><span class="co">##  - 715 items in the clustering</span></span>
<span><span class="co">##  - Requested indices:  rand jaccard </span></span>
<span><span class="co">##  - Metric summary:</span></span>
<span><span class="co">##           rand   jaccard</span></span>
<span><span class="co">## Min  0.7366751 0.4855142</span></span>
<span><span class="co">## Mean 0.7755421 0.5479449</span></span>
<span><span class="co">## Max  0.8417739 0.6505291</span></span>
<span><span class="co">##  - Correlation between each partition and the total frequency of item  pairwise membership computed:</span></span>
<span><span class="co">##    # Range:  0.772  -  0.859 </span></span>
<span><span class="co">##    # Partition(s) most representative (i.e., highest correlation): </span></span>
<span><span class="co">##  K_3_nhclu </span></span>
<span><span class="co">##  Correlation =  0.859 </span></span>
<span><span class="co">##  - Item pairwise membership  stored in outputs</span></span>
<span><span class="co">##  - Confusion matrices of partition comparisons  stored in outputs</span></span></code></pre>
<p><code><a href="../reference/compare_partitions.html">compare_partitions()</a></code> produces several outputs which: -
look within each partition/bioregionalization how sites are assigned to
bioregions - compare different partitions/bioregionalizations by
analysing whether they produce similar pairwise memberships</p>
<p>Let’s first look at pairwise membership within
bioregionalization.</p>
<div class="section level3">
<h3 id="pairwise-membership">Pairwise membership<a class="anchor" aria-label="anchor" href="#pairwise-membership"></a>
</h3>
<p>The number of pairwise combinations for
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi><annotation encoding="application/x-tex">n</annotation></semantics></math>
sites equals
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow><mi>/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">n(n-1)/2</annotation></semantics></math>.
So in our case, where we have 715 sites, we do end up with 2.55255^{5}
pairwise combinations.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">hclu_vs_netclu</span><span class="op">$</span><span class="va">pairwise_membership</span><span class="op">)</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">comp</span><span class="op">)</span><span class="op">*</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">comp</span><span class="op">)</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">/</span><span class="fl">2</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] TRUE</span></span></code></pre>
<p>Pairwise memberships look for each pairs of site whether they are
assigned to the same or to a different bioregion. Let’s look at the
sites 1 and 9 across the different bioregionalization:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">comp</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">9</span><span class="op">)</span>, <span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">##    ID K_3_hclu K_3_netclu K_3_nhclu</span></span>
<span><span class="co">## 1 505        1          1         2</span></span>
<span><span class="co">## 9 557        1          1         1</span></span></code></pre>
<p>We can see that the sites 1 and 9 are classified in the same
bioregion in the first two bioregionalizations, but not in the third
one.<br>
The <code>$pairwise_membership</code> output of
<code><a href="../reference/compare_partitions.html">compare_partitions()</a></code> shows this as a
<code>TRUE/FALSE</code> statement.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hclu_vs_netclu</span><span class="op">$</span><span class="va">pairwise_membership</span><span class="op">[</span><span class="fl">8</span><span class="op">:</span><span class="fl">10</span>, <span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">##      K_3_hclu K_3_netclu K_3_nhclu</span></span>
<span><span class="co">## 1_9      TRUE       TRUE     FALSE</span></span>
<span><span class="co">## 1_10    FALSE      FALSE     FALSE</span></span>
<span><span class="co">## 1_11    FALSE       TRUE     FALSE</span></span></code></pre>
<p>The number of times each pair of sites are clustered together
(i.e. the sum of rows of the table in <code>$pairwise_membership</code>)
is available in the <code>$freq_item_pw_membership</code> output:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hclu_vs_netclu</span><span class="op">$</span><span class="va">freq_item_pw_membership</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">8</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">## 1_2 1_9 </span></span>
<span><span class="co">##   0   2</span></span></code></pre>
<p>The sites 1 and 2 were never classified in the same bioregion across
the three bioregionalizations. Sites 1 and 9 were classified in the same
bioregion in two bioregionalizations. If we look at the total
frequencies:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">hclu_vs_netclu</span><span class="op">$</span><span class="va">freq_item_pw_membership</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##      0      1      2      3 </span></span>
<span><span class="co">## 115150  43508  42433  54164</span></span></code></pre>
<p>we see that the most dominant situation is when sites are never
assigned to the same bioregion.</p>
</div>
<div class="section level3">
<h3 id="confusion-matrix">Confusion matrix<a class="anchor" aria-label="anchor" href="#confusion-matrix"></a>
</h3>
<p>The confusion matrix allows to compare different bioregionalizations
by looking at the similarity of their pairwise memberships. To do so,
the function computes a confusion matrix with four elements: .
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>a</mi><annotation encoding="application/x-tex">a</annotation></semantics></math>
number of pairs of sites grouped in bioregionalization 1 and in
bioregionalization 2 .
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>b</mi><annotation encoding="application/x-tex">b</annotation></semantics></math>
number of pairs of sites grouped in bioregionalization 1 but not in
bioregionalization 2 .
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>c</mi><annotation encoding="application/x-tex">c</annotation></semantics></math>
number of pairs of sites not grouped in bioregionalization 1 but grouped
in bioregionalization 2 .
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>d</mi><annotation encoding="application/x-tex">d</annotation></semantics></math>
number of pairs of sites not grouped in both bioregionalization 1 &amp;
2</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hclu_vs_netclu</span><span class="op">$</span><span class="va">confusion_matrix</span></span></code></pre></div>
<pre><code><span><span class="co">## $`K_3_hclu%K_3_netclu`</span></span>
<span><span class="co">##      a      b      c      d </span></span>
<span><span class="co">##  63430  30529  36686 124610 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $`K_3_hclu%K_3_nhclu`</span></span>
<span><span class="co">##      a      b      c      d </span></span>
<span><span class="co">##  75181  18778  21610 139686 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $`K_3_netclu%K_3_nhclu`</span></span>
<span><span class="co">##      a      b      c      d </span></span>
<span><span class="co">##  66314  33802  30477 124662</span></span></code></pre>
<p>Based on the confusion matrices, we can compute a range of indices to
indicate the agreement among partitions. As of now, we have
implemented:<br><br><em>Rand index</em>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mo stretchy="true" form="prefix">(</mo><mi>a</mi><mo>+</mo><mi>d</mi><mo stretchy="true" form="postfix">)</mo></mrow><mi>/</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>a</mi><mo>+</mo><mi>b</mi><mo>+</mo><mi>c</mi><mo>+</mo><mi>d</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">(a+d)/(a+b+c+d)</annotation></semantics></math>
The Rand index measures agreement among partitions by accounting for
both the pairs of sites that are grouped, but also the pairs of sites
that are not grouped.<br><br><em>Jaccard index </em>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi>/</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>a</mi><mo>+</mo><mi>b</mi><mo>+</mo><mi>c</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">a/(a+b+c)</annotation></semantics></math>
The Jaccard index measures agreement among partitions by only accounting
for pairs of sites that are grouped.</p>
<p>These two metrics are complementary, because the Jaccard index will
tell if partitions are similar in their clustering structure, whereas
the Rand index will tell if partitions are similar not only in the pairs
of items clustered together, but also in terms of the pairs of sites
that are not clustered together. For example, take two partitions which
never group together the same pairs of sites. Their Jaccard index will
be 0, whereas the Rand index can be &gt; 0 due to the sites that are not
grouped together.</p>
<p>Additional indices can be manually computed by the users on the basis
of the list of confusion matrices.</p>
<p>In some cases, users may be interested in finding which of the
partitions is most representative of all partitions. To find it out, we
can compare the pairwise membership of each partition with the total
frequency of pairwise membership across all partitions. This correlation
can be requested with <code>cor_frequency = TRUE</code>.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hclu_vs_netclu</span><span class="op">$</span><span class="va">partition_freq_cor</span></span></code></pre></div>
<pre><code><span><span class="co">##   K_3_hclu K_3_netclu  K_3_nhclu </span></span>
<span><span class="co">##  0.8475913  0.7723665  0.8592373</span></span></code></pre>
<p>Here the third bioregionalization is the most representative of all
partitions.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Maxime Lenormand, Boris Leroy, Pierre Denelle.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
